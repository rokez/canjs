<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: [object Object]
	@page Observables
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
</head>

<body>
  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger">Menu</label>
  <header><nav class="navbar">
	<a class="brand" href="../index.html">CanJS</a>

	<ul class="bitovi-menu">
		<li class="dropdown">
			<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
			<ul class="dropdown-menu">
				<li><a href="http://bitovi.com">Bitovi.com</a></li>
				<li><a href="http://bitovi.com/blog/">Blog</a></li>
				<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
				<li><a href="http://bitovi.com/training/">Training</a></li>
				<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
			</ul>
		</li>
	</ul>

	<ul class="navbar-items">
		<li class="dropdown">
				<a href="http://github.com/canjs/canjs">Github</a>
				<ul class="dropdown-menu">
      		<li><a href="http://github.com/canjs/can-connect">can-connect</a></li>
					<li><a href=".">can-set</a></li>
					<li><a href=".">can-compute</a></li>
					<li><a href=".">can-component</a></li>
				</ul>
		</li>
		<li>
			<a href="https://gitter.im/canjs/canjs">Chat</a>
		</li>
		<li>
			<a href="http://forums.donejs.com/c/canjs">Forum</a>
		</li>
	</ul>

</nav>
</header>
  	<div class="main-container">
  
  	<nav class="sidebar">
    
        
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-core.html">
							Core
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-ecosystem.html">
							Ecosystem
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-infrastructure.html">
							Infrastructure
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-legacy.html">
							Legacy
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               parent
                               expanded">
						<a class="page"
							href="guides.html">
							Guides
						</a>
						
							
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Why.html">
							Why CanJS?
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Using.html">
							Setting up CanJS
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               parent
                               expanded">
						<a class="page"
							href="Tutorial.html">
							Getting Started Tutorial
						</a>
						
							
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Setup.html">
							Setup
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="ApplicationDesign.html">
							Application Design
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Constructors.html">
							Constructors
						</a>
						
					</li>
				

			
		
			
				
					<li class="current
                               parent
                               expanded">
						<a class="page"
							href="Observables.html">
							Observables
						</a>
						
							

						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="TheDefinePlugin.html">
							The Define Plugin
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="StacheTemplates.html">
							Stache Templates
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="AppStateAndRouting.html">
							App State and Routing
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Components.html">
							Components
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="ViewModels.html">
							View Models
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="DataModelsAndFixtures.html">
							Data Models and Fixtures
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Routing.html">
							Routing
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="LoadingStates.html">
							Loading States
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="EventHandling.html">
							Event Handling
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="WebServiceCommunication.html">
							Web Service Communication
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Recap.html">
							Recap
						</a>
						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Recipes.html">
							Recipes
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="migrating.html">
							Migrating to 3.0
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="roadmap.html">
							Roadmap
						</a>
						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
	</ul>


    
</nav>
  

  <div class="content-container">
    <article>
    	
    		<section class="title">
	<h1>Observables</h1>
</section>

    	

        

    	
    		
    			<section class="description">
    
</section>

    		
    	

    
    
    
    
    


    	
    		
    			<section class="body">
    <div class="getting-started">
<hr />
<p><strong>In this Chapter</strong></p>
<ul>
<li><code>can.Map</code>, and</li>
<li><code>can.List</code></li>
</ul>
<hr />
<p>Observables are the subjects in the
<a href="http://en.wikipedia.org/wiki/Observer_pattern">observer pattern</a>.
They let you create relationships between objects
where one object (or objects) listens for and responds to changes in another object.
Most of the core objects in CanJS are observables. Understanding how to effectively
work with observables lies at the heart of understanding how to build successful
CanJS applications.</p>
<p>In this section, we’ll review the two observables that make up the core of most CanJS objects:</p>
<ul>
<li><a href="../docs/can.Map.html"><code>can.Map</code></a> - Used for Objects.</li>
<li><a href="../docs/can.List.html"><code>can.List</code></a> - Used for Arrays.</li>
</ul>
<p><code>can.Map</code> and <code>can.List</code> are often extended to create observable types. For example,
<a href="../docs/can.Model.html">can.Model</a> and <a href="../docs/can.route.html">can.route</a> are
based on <code>can.Map</code>, and a <code>can.Component</code>’s <a href="../docs/can.Component.prototype.viewModel.html"><code>viewModel</code></a>
is a <code>can.Map</code>.</p>
<h2>Creating Instances</h2>
<p>To create a Map, call <code>new can.Map(object)</code>. This will give you a map
with the same properties and values as the <em>object</em> you passed in to the <code>can.Map</code> constructor.</p>
<p>To create a List, call <code>new can.List(array)</code>. This will give you a List with the same elements as the
<em>array</em> you passed into the <code>can.List</code> constructor.</p>
<pre><code>var pagination = new can.Map({page: 1, perPage: 25, count: 1388});
pagination.attr('perPage'); // 25

var hobbies = new can.List(['programming', 'bball', 'party rocking']);
hobbies.attr(2); // 'party rocking'
</code></pre>
<h2>Manipulating properties</h2>
<p>The <a href="../docs/can.Map.prototype.attr.html"><code>attr</code></a> method is
used to read a property from, or write a property to a <code>can.Map</code> or <code>can.List</code>.
While you can read the properties of a <code>can.Map</code> or <code>can.List</code> directly off
of the object, to take advantage of the observable functionality you must
use the <code>.attr</code> syntax.</p>
<pre><code>var pagination = new can.Map({page: 1, perPage: 25, count: 1388});

pagination.attr('perPage');     // 25
pagination.attr('perPage', 50);
pagination.attr('perPage');     // 50

pagination.attr({page: 10, lastVisited: 1});
pagination.attr(); // {page: 10, perPage: 50, count: 1388, lastVisited: 1}
</code></pre>
<p>Properties can be removed by using <a href="../docs/can.Map.prototype.removeAttr.html"><code>removeAttr</code></a>,
which is equivalent to the <code>delete</code> keyword:</p>
<pre><code>pagination.removeAttr('count');
pagination.attr(); // {page: 10, perPage: 50, lastVisited: 1}
</code></pre>
<h2>Extending a Map</h2>
<p>Extending a <code>can.Map</code> (or <code>can.List</code>) lets you create custom observable
types. The following extends <code>can.Map</code> to create a Paginate type that
has a <code>.next()</code> method:</p>
<pre><code>Paginate = can.Map.extend({
  define: {
    limit: {
      value: 100
    },
    offset: {
      value: 100
    },
    count: {
      value: Infinity
    }
  },
  next: function() {
    this.attr('offset', this.attr('offset') + this.attr('limit') );
  }
});

var pageInfo = new Paginate();
pageInfo.attr(&quot;offset&quot;) //-&gt; 100

pageInfo.next();

pageInfo.attr(&quot;offset&quot;) //-&gt; 200
</code></pre>
<h2>Responding to changes</h2>
<p>When a property on a Map is changed with <code>attr</code>, it will emit an event with the
name of the changed property.  You can <a href="../docs/can.Map.prototype.bind.html">bind</a>
to those events and perform some action:</p>
<pre><code>pagination.bind('page', function(event, newVal, oldVal) {
    newVal; // 11
    oldVal; // 10
    
    $(&quot;#page&quot;).text(&quot;Page: &quot;+newVal);
});

pagination.attr('page', 11);
</code></pre>
<p>Although <code>bind</code> and its corresponding <code>unbind</code> method exist, <strong>there's almost no
reason to ever use them!</strong>  This is because there are better ways to perform
the common actions that would require binding to an observable.</p>
<p>For example, <code>stache</code> templates will automatically update when an observable changes:</p>
<pre><code>var template = can.stache(&quot;&lt;span id='page'&gt;{{page}}&lt;/span&gt;&quot;);
$(&quot;body&quot;).append(template(pagination));

document.getElementById(&quot;page&quot;).innerHTML //-&gt; &quot;11&quot;

pagination.attr('page', 12);

document.getElementById(&quot;page&quot;).innerHTML //-&gt; &quot;12&quot;
</code></pre>
<p>The other common use case is to create some new, derived value.  <a href="../docs/can.compute.html">can.compute</a>
or <a href="../docs/can.Map.prototype.define.get.html">define getters</a> lets you use functional
(and reactive) programming techniques to derive new values from source
state.</p>
<p>For example, we can create a virtual <code>page</code> observable that derives its value from the
<code>offset</code> and <code>limit</code>:</p>
<pre><code>var pagination = new Paginate({
  limit: 10,
  offset: 20
});

var page = can.compute(function(){
  return Math.floor(pagination.attr('offset') / 
                    pagination.attr('limit')) + 1;
});

page() //-&gt; 3

page.bind(&quot;change&quot;, function(ev, newValue){
  newValue //-&gt; 4
});

pagination.attr(&quot;offset&quot;,30);
</code></pre>
<p>In this example <code>page</code> will automatically be updated when either <code>offset</code> or <code>limit</code> change.</p>
<p>However, <code>page</code> is more commonly created as a &quot;virtual&quot; property of the <code>Paginate</code> Map type
using a <a href="../docs/can.Map.prototype.define.get.html">define getter</a>:</p>
<pre><code>Paginate = can.Map.extend({
  define: {
    ...
    page: {
      get: function() {
        return Math.floor(this.attr('offset') / this.attr('limit')) + 1;
      }
    }
  },
  ...
});

var pageInfo = new Paginate({
  limit: 10,
  offset: 20,
  count: 30
});
pageInfo.attr(&quot;page&quot;) //-&gt; 3

pageInfo.bind(&quot;page&quot;, function(ev, newVal){
  newVal //-&gt; 4
});

pageInfo.next();
</code></pre>
<p>Using computes and define getters are very similar to using functional-reactive programming
event streams.  Given some source state, they are able to derive and combine it into new values.</p>
<p>Computes and define getters are easier, but less powerful than event streams.  Computes
and define getters only respond to changes in values where event streams
are also able to respond to events. However, computes and define getters
are eaiser to express and automatically manage subscriptions to source values.</p>
<p>For example, consider deriving a total for one of two menus depending on the time
of day:</p>
<pre><code>var lunch = new can.List([
  {name: &quot;nachos&quot;, price: 10.25},
  {name: &quot;water&quot;, price: 0},
  {name: &quot;taco&quot;, price: 3.25}
]);

var dinner = new can.List([
  {name: &quot;burrito&quot;, price: 12.25},
  {name: &quot;agua&quot;, price: 1.20}
]);

var timeOfDay = can.compute(&quot;lunch&quot;);

var total = can.compute(function(){
  var list = timeOfDay() === &quot;lunch&quot; ? lunch : dinner;
  var sum = 0;
  list.forEach(function(item){
    sum += item.attr(&quot;price&quot;);
  });
  return sum;
});
</code></pre>
<p>In this example, <code>total</code> will listen to not only <code>timeOfDay</code>, but
also when items are added or removed to <code>lunch</code> or <code>dinner</code>, and each item's
<code>price</code>.  Furthermore, it only listens to just what needs to be listened to. It will
listen to either <code>lunch</code> or <code>dinner</code>, but not both.</p>
<p>In the <a href="TheDefinePlugin.html">next chapter</a> we'll expand on the use of the define plugin
and show how it can handle asyncronous derived data like AJAX requests.</p>
<h2>Iterating though a Map</h2>
<p>If you want to iterate through the properties on a Map, use <code>each</code>:</p>
<pre><code>var pagination = new can.Map({page: 10, perPage: 25, count: 1388});

pagination.each(function(val, key) {
    console.log(key + ': ' + val);
});

// The console shows:
// page: 10
// perPage: 25
// count: 1388
</code></pre>
<h2>Observable Arrays</h2>
<p>CanJS also provides observable arrays with <code>can.List</code>.
<code>can.List</code> inherits from <code>can.Map</code>. A <code>can.List</code> works much the same way a
<code>can.Map</code> does, with the addition of methods useful for working with
arrays:</p>
<ul>
<li><a href="../docs/can.List.prototype.indexOf.html"><code>indexOf</code></a>, which looks for an item in a
List.</li>
<li><a href="../docs/can.List.prototype.pop.html"><code>pop</code></a>, which removes the last item from a
List.</li>
<li><a href="../docs/can.List.prototype.push.html"><code>push</code></a>, which adds an item to the end of a
List.</li>
<li><a href="../docs/can.List.prototype.shift.html"><code>shift</code></a>, which removes the first item from
a List.</li>
<li><a href="../docs/can.List.prototype.unshift.html"><code>unshift</code></a>, which adds an item to the front
of a List.</li>
<li><a href="../docs/can.List.prototype.splice.html"><code>splice</code></a>, which removes and inserts items
anywhere in a List.</li>
</ul>
<p>When these methods are used to modify a List events are
emitted that you can listen for, as well. See <a href="../docs/can.List.html">the API for Lists</a> for more
information.</p>
<p><span class="pull-left"><a href="ApplicationFoundations.html">&lsaquo; Application Foundations</a></span>
<span class="pull-right"><a href="TheDefinePlugin.html">The Define Plugin &rsaquo;</a></span></p>
</div>

</section>

    		
    	

    </article>
  </div>
</div>

  <footer><p>CanJS is part of <a href="http://donejs.com">DoneJS</a>. Created and maintained by the open source team at <a href="http://bitovi.com">Bitovi</a>. <strong>Currently v3.0.0.</strong></p></footer>
	<script type="text/javascript">
		var docObject = {"content":"<div class=\"main-container\">\n  \n  \t<nav class=\"sidebar\">\n    \n        \n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-core.html\">\n\t\t\t\t\t\t\tCore\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-ecosystem.html\">\n\t\t\t\t\t\t\tEcosystem\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-infrastructure.html\">\n\t\t\t\t\t\t\tInfrastructure\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-legacy.html\">\n\t\t\t\t\t\t\tLegacy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"guides.html\">\n\t\t\t\t\t\t\tGuides\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Why.html\">\n\t\t\t\t\t\t\tWhy CanJS?\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Using.html\">\n\t\t\t\t\t\t\tSetting up CanJS\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Tutorial.html\">\n\t\t\t\t\t\t\tGetting Started Tutorial\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Setup.html\">\n\t\t\t\t\t\t\tSetup\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"ApplicationDesign.html\">\n\t\t\t\t\t\t\tApplication Design\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Constructors.html\">\n\t\t\t\t\t\t\tConstructors\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"current\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Observables.html\">\n\t\t\t\t\t\t\tObservables\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"TheDefinePlugin.html\">\n\t\t\t\t\t\t\tThe Define Plugin\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"StacheTemplates.html\">\n\t\t\t\t\t\t\tStache Templates\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"AppStateAndRouting.html\">\n\t\t\t\t\t\t\tApp State and Routing\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Components.html\">\n\t\t\t\t\t\t\tComponents\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"ViewModels.html\">\n\t\t\t\t\t\t\tView Models\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"DataModelsAndFixtures.html\">\n\t\t\t\t\t\t\tData Models and Fixtures\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Routing.html\">\n\t\t\t\t\t\t\tRouting\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"LoadingStates.html\">\n\t\t\t\t\t\t\tLoading States\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"EventHandling.html\">\n\t\t\t\t\t\t\tEvent Handling\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"WebServiceCommunication.html\">\n\t\t\t\t\t\t\tWeb Service Communication\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Recap.html\">\n\t\t\t\t\t\t\tRecap\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Recipes.html\">\n\t\t\t\t\t\t\tRecipes\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"migrating.html\">\n\t\t\t\t\t\t\tMigrating to 3.0\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"roadmap.html\">\n\t\t\t\t\t\t\tRoadmap\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n    \n</nav>\n  \n\n  <div class=\"content-container\">\n    <article>\n    \t\n    \t\t<section class=\"title\">\n\t<h1>Observables</h1>\n</section>\n\n    \t\n\n        \n\n    \t\n    \t\t\n    \t\t\t<section class=\"description\">\n    \n</section>\n\n    \t\t\n    \t\n\n    \n    \n    \n    \n    \n\n\n    \t\n    \t\t\n    \t\t\t<section class=\"body\">\n    <div class=\"getting-started\">\n<hr />\n<p><strong>In this Chapter</strong></p>\n<ul>\n<li><code>can.Map</code>, and</li>\n<li><code>can.List</code></li>\n</ul>\n<hr />\n<p>Observables are the subjects in the\n<a href=\"http://en.wikipedia.org/wiki/Observer_pattern\">observer pattern</a>.\nThey let you create relationships between objects\nwhere one object (or objects) listens for and responds to changes in another object.\nMost of the core objects in CanJS are observables. Understanding how to effectively\nwork with observables lies at the heart of understanding how to build successful\nCanJS applications.</p>\n<p>In this section, we’ll review the two observables that make up the core of most CanJS objects:</p>\n<ul>\n<li><a href=\"../docs/can.Map.html\"><code>can.Map</code></a> - Used for Objects.</li>\n<li><a href=\"../docs/can.List.html\"><code>can.List</code></a> - Used for Arrays.</li>\n</ul>\n<p><code>can.Map</code> and <code>can.List</code> are often extended to create observable types. For example,\n<a href=\"../docs/can.Model.html\">can.Model</a> and <a href=\"../docs/can.route.html\">can.route</a> are\nbased on <code>can.Map</code>, and a <code>can.Component</code>’s <a href=\"../docs/can.Component.prototype.viewModel.html\"><code>viewModel</code></a>\nis a <code>can.Map</code>.</p>\n<h2>Creating Instances</h2>\n<p>To create a Map, call <code>new can.Map(object)</code>. This will give you a map\nwith the same properties and values as the <em>object</em> you passed in to the <code>can.Map</code> constructor.</p>\n<p>To create a List, call <code>new can.List(array)</code>. This will give you a List with the same elements as the\n<em>array</em> you passed into the <code>can.List</code> constructor.</p>\n<pre><code>var pagination = new can.Map({page: 1, perPage: 25, count: 1388});\npagination.attr('perPage'); // 25\n\nvar hobbies = new can.List(['programming', 'bball', 'party rocking']);\nhobbies.attr(2); // 'party rocking'\n</code></pre>\n<h2>Manipulating properties</h2>\n<p>The <a href=\"../docs/can.Map.prototype.attr.html\"><code>attr</code></a> method is\nused to read a property from, or write a property to a <code>can.Map</code> or <code>can.List</code>.\nWhile you can read the properties of a <code>can.Map</code> or <code>can.List</code> directly off\nof the object, to take advantage of the observable functionality you must\nuse the <code>.attr</code> syntax.</p>\n<pre><code>var pagination = new can.Map({page: 1, perPage: 25, count: 1388});\n\npagination.attr('perPage');     // 25\npagination.attr('perPage', 50);\npagination.attr('perPage');     // 50\n\npagination.attr({page: 10, lastVisited: 1});\npagination.attr(); // {page: 10, perPage: 50, count: 1388, lastVisited: 1}\n</code></pre>\n<p>Properties can be removed by using <a href=\"../docs/can.Map.prototype.removeAttr.html\"><code>removeAttr</code></a>,\nwhich is equivalent to the <code>delete</code> keyword:</p>\n<pre><code>pagination.removeAttr('count');\npagination.attr(); // {page: 10, perPage: 50, lastVisited: 1}\n</code></pre>\n<h2>Extending a Map</h2>\n<p>Extending a <code>can.Map</code> (or <code>can.List</code>) lets you create custom observable\ntypes. The following extends <code>can.Map</code> to create a Paginate type that\nhas a <code>.next()</code> method:</p>\n<pre><code>Paginate = can.Map.extend({\n  define: {\n    limit: {\n      value: 100\n    },\n    offset: {\n      value: 100\n    },\n    count: {\n      value: Infinity\n    }\n  },\n  next: function() {\n    this.attr('offset', this.attr('offset') + this.attr('limit') );\n  }\n});\n\nvar pageInfo = new Paginate();\npageInfo.attr(&quot;offset&quot;) //-&gt; 100\n\npageInfo.next();\n\npageInfo.attr(&quot;offset&quot;) //-&gt; 200\n</code></pre>\n<h2>Responding to changes</h2>\n<p>When a property on a Map is changed with <code>attr</code>, it will emit an event with the\nname of the changed property.  You can <a href=\"../docs/can.Map.prototype.bind.html\">bind</a>\nto those events and perform some action:</p>\n<pre><code>pagination.bind('page', function(event, newVal, oldVal) {\n    newVal; // 11\n    oldVal; // 10\n    \n    $(&quot;#page&quot;).text(&quot;Page: &quot;+newVal);\n});\n\npagination.attr('page', 11);\n</code></pre>\n<p>Although <code>bind</code> and its corresponding <code>unbind</code> method exist, <strong>there's almost no\nreason to ever use them!</strong>  This is because there are better ways to perform\nthe common actions that would require binding to an observable.</p>\n<p>For example, <code>stache</code> templates will automatically update when an observable changes:</p>\n<pre><code>var template = can.stache(&quot;&lt;span id='page'&gt;{{page}}&lt;/span&gt;&quot;);\n$(&quot;body&quot;).append(template(pagination));\n\ndocument.getElementById(&quot;page&quot;).innerHTML //-&gt; &quot;11&quot;\n\npagination.attr('page', 12);\n\ndocument.getElementById(&quot;page&quot;).innerHTML //-&gt; &quot;12&quot;\n</code></pre>\n<p>The other common use case is to create some new, derived value.  <a href=\"../docs/can.compute.html\">can.compute</a>\nor <a href=\"../docs/can.Map.prototype.define.get.html\">define getters</a> lets you use functional\n(and reactive) programming techniques to derive new values from source\nstate.</p>\n<p>For example, we can create a virtual <code>page</code> observable that derives its value from the\n<code>offset</code> and <code>limit</code>:</p>\n<pre><code>var pagination = new Paginate({\n  limit: 10,\n  offset: 20\n});\n\nvar page = can.compute(function(){\n  return Math.floor(pagination.attr('offset') / \n                    pagination.attr('limit')) + 1;\n});\n\npage() //-&gt; 3\n\npage.bind(&quot;change&quot;, function(ev, newValue){\n  newValue //-&gt; 4\n});\n\npagination.attr(&quot;offset&quot;,30);\n</code></pre>\n<p>In this example <code>page</code> will automatically be updated when either <code>offset</code> or <code>limit</code> change.</p>\n<p>However, <code>page</code> is more commonly created as a &quot;virtual&quot; property of the <code>Paginate</code> Map type\nusing a <a href=\"../docs/can.Map.prototype.define.get.html\">define getter</a>:</p>\n<pre><code>Paginate = can.Map.extend({\n  define: {\n    ...\n    page: {\n      get: function() {\n        return Math.floor(this.attr('offset') / this.attr('limit')) + 1;\n      }\n    }\n  },\n  ...\n});\n\nvar pageInfo = new Paginate({\n  limit: 10,\n  offset: 20,\n  count: 30\n});\npageInfo.attr(&quot;page&quot;) //-&gt; 3\n\npageInfo.bind(&quot;page&quot;, function(ev, newVal){\n  newVal //-&gt; 4\n});\n\npageInfo.next();\n</code></pre>\n<p>Using computes and define getters are very similar to using functional-reactive programming\nevent streams.  Given some source state, they are able to derive and combine it into new values.</p>\n<p>Computes and define getters are easier, but less powerful than event streams.  Computes\nand define getters only respond to changes in values where event streams\nare also able to respond to events. However, computes and define getters\nare eaiser to express and automatically manage subscriptions to source values.</p>\n<p>For example, consider deriving a total for one of two menus depending on the time\nof day:</p>\n<pre><code>var lunch = new can.List([\n  {name: &quot;nachos&quot;, price: 10.25},\n  {name: &quot;water&quot;, price: 0},\n  {name: &quot;taco&quot;, price: 3.25}\n]);\n\nvar dinner = new can.List([\n  {name: &quot;burrito&quot;, price: 12.25},\n  {name: &quot;agua&quot;, price: 1.20}\n]);\n\nvar timeOfDay = can.compute(&quot;lunch&quot;);\n\nvar total = can.compute(function(){\n  var list = timeOfDay() === &quot;lunch&quot; ? lunch : dinner;\n  var sum = 0;\n  list.forEach(function(item){\n    sum += item.attr(&quot;price&quot;);\n  });\n  return sum;\n});\n</code></pre>\n<p>In this example, <code>total</code> will listen to not only <code>timeOfDay</code>, but\nalso when items are added or removed to <code>lunch</code> or <code>dinner</code>, and each item's\n<code>price</code>.  Furthermore, it only listens to just what needs to be listened to. It will\nlisten to either <code>lunch</code> or <code>dinner</code>, but not both.</p>\n<p>In the <a href=\"TheDefinePlugin.html\">next chapter</a> we'll expand on the use of the define plugin\nand show how it can handle asyncronous derived data like AJAX requests.</p>\n<h2>Iterating though a Map</h2>\n<p>If you want to iterate through the properties on a Map, use <code>each</code>:</p>\n<pre><code>var pagination = new can.Map({page: 10, perPage: 25, count: 1388});\n\npagination.each(function(val, key) {\n    console.log(key + ': ' + val);\n});\n\n// The console shows:\n// page: 10\n// perPage: 25\n// count: 1388\n</code></pre>\n<h2>Observable Arrays</h2>\n<p>CanJS also provides observable arrays with <code>can.List</code>.\n<code>can.List</code> inherits from <code>can.Map</code>. A <code>can.List</code> works much the same way a\n<code>can.Map</code> does, with the addition of methods useful for working with\narrays:</p>\n<ul>\n<li><a href=\"../docs/can.List.prototype.indexOf.html\"><code>indexOf</code></a>, which looks for an item in a\nList.</li>\n<li><a href=\"../docs/can.List.prototype.pop.html\"><code>pop</code></a>, which removes the last item from a\nList.</li>\n<li><a href=\"../docs/can.List.prototype.push.html\"><code>push</code></a>, which adds an item to the end of a\nList.</li>\n<li><a href=\"../docs/can.List.prototype.shift.html\"><code>shift</code></a>, which removes the first item from\na List.</li>\n<li><a href=\"../docs/can.List.prototype.unshift.html\"><code>unshift</code></a>, which adds an item to the front\nof a List.</li>\n<li><a href=\"../docs/can.List.prototype.splice.html\"><code>splice</code></a>, which removes and inserts items\nanywhere in a List.</li>\n</ul>\n<p>When these methods are used to modify a List events are\nemitted that you can listen for, as well. See <a href=\"../docs/can.List.html\">the API for Lists</a> for more\ninformation.</p>\n<p><span class=\"pull-left\"><a href=\"ApplicationFoundations.html\">&lsaquo; Application Foundations</a></span>\n<span class=\"pull-right\"><a href=\"TheDefinePlugin.html\">The Define Plugin &rsaquo;</a></span></p>\n</div>\n\n</section>\n\n    \t\t\n    \t\n\n    </article>\n  </div>\n</div>\n","src":{"path":"docs/can-guides/getting-started-tutorial/observables.md"},"description":"\n","name":"Observables","title":"Observables","type":"page","parent":"Tutorial","order":3,"comment":" ","disabletableofcontents":true};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="./static/node_modules/steal/steal.production.js"></script>
	
</body>

</html>
