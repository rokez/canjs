<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: [object Object]
	@page StacheTemplates
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
</head>

<body>
  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger">Menu</label>
  <header><nav class="navbar">
	<a class="brand" href="../index.html">CanJS</a>

	<ul class="bitovi-menu">
		<li class="dropdown">
			<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
			<ul class="dropdown-menu">
				<li><a href="http://bitovi.com">Bitovi.com</a></li>
				<li><a href="http://bitovi.com/blog/">Blog</a></li>
				<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
				<li><a href="http://bitovi.com/training/">Training</a></li>
				<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
			</ul>
		</li>
	</ul>

	<ul class="navbar-items">
		<li class="dropdown">
				<a href="http://github.com/canjs/canjs">Github</a>
				<ul class="dropdown-menu">
      		<li><a href="http://github.com/canjs/can-connect">can-connect</a></li>
					<li><a href=".">can-set</a></li>
					<li><a href=".">can-compute</a></li>
					<li><a href=".">can-component</a></li>
				</ul>
		</li>
		<li>
			<a href="https://gitter.im/canjs/canjs">Chat</a>
		</li>
		<li>
			<a href="http://forums.donejs.com/c/canjs">Forum</a>
		</li>
	</ul>

</nav>
</header>
  	<div class="main-container">
  
  	<nav class="sidebar">
    
        
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-core.html">
							Core
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-ecosystem.html">
							Ecosystem
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-infrastructure.html">
							Infrastructure
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-legacy.html">
							Legacy
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               parent
                               expanded">
						<a class="page"
							href="guides.html">
							Guides
						</a>
						
							
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Why.html">
							Why CanJS?
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Using.html">
							Setting up CanJS
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               parent
                               expanded">
						<a class="page"
							href="Tutorial.html">
							Getting Started Tutorial
						</a>
						
							
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Setup.html">
							Setup
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="ApplicationDesign.html">
							Application Design
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Constructors.html">
							Constructors
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Observables.html">
							Observables
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="TheDefinePlugin.html">
							The Define Plugin
						</a>
						
					</li>
				

			
		
			
				
					<li class="current
                               parent
                               expanded">
						<a class="page"
							href="StacheTemplates.html">
							Stache Templates
						</a>
						
							

						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="AppStateAndRouting.html">
							App State and Routing
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Components.html">
							Components
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="ViewModels.html">
							View Models
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="DataModelsAndFixtures.html">
							Data Models and Fixtures
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Routing.html">
							Routing
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="LoadingStates.html">
							Loading States
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="EventHandling.html">
							Event Handling
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="WebServiceCommunication.html">
							Web Service Communication
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Recap.html">
							Recap
						</a>
						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Recipes.html">
							Recipes
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="migrating.html">
							Migrating to 3.0
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="roadmap.html">
							Roadmap
						</a>
						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
	</ul>


    
</nav>
  

  <div class="content-container">
    <article>
    	
    		<section class="title">
	<h1>Stache Templates</h1>
</section>

    	

        

    	
    		
    			<section class="description">
    
</section>

    		
    	

    
    
    
    
    


    	
    		
    			<section class="body">
    <div class="getting-started">
<hr />
<p><strong>In this Chapter</strong></p>
<ul>
<li>Stache Templates</li>
</ul>
<p>Get the code for: <a href="/guides/examples/PlaceMyOrder/ch-2_canjs-getting-started.zip">chapter: stache templates</a></p>
<hr />
<p>Now that we have a basic sketch of our application, and we've covered a few CanJS fundamentals,
it’s time for us to start working with the sample application. We'll begin with the
application's templates.</p>
<p>As mentioned in the <a href="./Tutorial.html">introduction</a>, we’re using Stache templates in
our app. Remember that when we downloaded our custom build of CanJS, we
included the <a href="../docs/can.stache.html">can.stache</a> plugin.</p>
<p>We can create a simple template, render it to a document fragment and insert it into the page like
the following:</p>
<pre><code>var template = can.stache(&quot;&lt;h1&gt;{{message}}&lt;/h1&gt;&quot;);
var frag = template({message: &quot;Hello World&quot;});
$(&quot;body&quot;).append(frag);
</code></pre>
<p>Stache templates look similar to normal HTML, except they contain magic tags that contain
a very simple language that can be used to:</p>
<ul>
<li><a href="#context">lookup and insert values into the html output</a></li>
<li><a href="#enumeration">loop over arrays and can.Lists</a></li>
<li><a href="#conditionallogic">control-flow behavior like if and switch</a></li>
<li><a href="#partials">render other templates with partials</a></li>
<li>perform custom control-flow behavior</li>
</ul>
<p>Stache templates support both <a href="https://github.com/janl/mustache.js/">Mustache</a>
and <a href="http://handlebarsjs.com/">Handlebar</a> syntax. For more
information on the details of these formats, see their respective websites.</p>
<p>It will be easiest for us to look at these with an example, so let’s work with
one. Open up your <code>components/order_details/order_details.stache</code> file.
It should look like this:</p>
<pre><code class="language-html">{{#with order}}
  &lt;h3&gt;Thanks for your order {{name}}!&lt;/h3&gt;
  &lt;div&gt;
    &lt;label class=&quot;control-label&quot;&gt;Confirmation Number: {{_id}}&lt;/label&gt;
  &lt;/div&gt;

  &lt;h4&gt;Items ordered:&lt;/h4&gt;
  &lt;ul class=&quot;list-group panel&quot;&gt;
    {{#each items}}
      &lt;li class=&quot;list-group-item&quot;&gt;
        &lt;label&gt;
          {{name}} &lt;span class=&quot;badge&quot;&gt;${{price}}&lt;/span&gt;
        &lt;/label&gt;
      &lt;/li&gt;
    {{/each}}

    &lt;li class=&quot;list-group-item&quot;&gt;
      &lt;label&gt;Total &lt;span class=&quot;badge&quot;&gt;${{total}}&lt;/span&gt;&lt;/label&gt;
    &lt;/li&gt;
  &lt;/ul&gt;

  &lt;div&gt;&lt;label class=&quot;control-label&quot;&gt;Phone: {{phone}}&lt;/label&gt;&lt;/div&gt;
  &lt;div&gt;&lt;label class=&quot;control-label&quot;&gt;Address: {{address}}&lt;/label&gt;&lt;/div&gt;
{{/with}}
</code></pre>
<p><a name="context"></a></p>
<h2>Value lookup</h2>
<p>Assume for the moment that we have the following <code>customerOrder</code> map passed in to our Stache template:</p>
<pre><code>{
   customerNumber: 12543,
   customerType: 'Business',
   order: {
      name: 'Rudloph Steiner',
      _id: 837267,
      items: [
         {
            name: 'Garden Gnome',
            price: 23.70
         }
      ],
      total: 23.70,
      phone: '+49 170 345 6789',
      address: 'Beuselstrasse 15, Berlin',
      
      total: function(){
        var sum = 0;
        this.items.forEach(function(item){
          sum += item.price;
        });
        return sum;
      }
   }
}
</code></pre>
<p>If we want to show the <code>customerType</code> in a <code>&lt;span&gt;</code> we can do that in a stache template like the following:</p>
<pre><code>&lt;span&gt;{{customerType}}&lt;/span&gt;
</code></pre>
<p>What's inside the magic tags, in this case <code>customerType</code>, is a
<a href="../docs/can.stache.expressions.html#section_KeyLookupexpressions">key lookup expression</a>.
<a href="../docs/can.stache.key.html">Keys</a> are used to lookup values in the
<a href="../docs/can.view.Scope.html">template scope</a>.</p>
<p>A DOT(<code>.</code>) operator
can be used to lookup nested values.  For example:</p>
<pre><code>&lt;h3&gt;Thanks for your order {{order.name}}!&lt;/h3&gt;
&lt;span&gt;{{customerType}}&lt;/span&gt;
</code></pre>
<p>Similar to variable lookup JavaScript, a stache key lookup can search for a value in multiple places.
Each of these places is called a <strong>context</strong>.  The collection of all available contexts for a key lookup
is called a <a href="../docs/can.view.Scope.html">scope</a>.</p>
<p>The root context is
the data passed to a template. In this case, the root context is the <code>customerOrder</code>
object at the begining of this section.  This is why <code>{{customerType}}</code> outputs <code>Business</code>.</p>
<p><a href="../docs/can.stache.tags.section.html">Sections</a>
create contexts in Stache.  A section begins with <code>{{#EXPRESSION}}</code> or <code>{{^EXPRESSION}}</code>
and ends with <code>{{/EXPRESSION}}</code>.  In the following example <code>{{#with order}}</code>
defines a section whose scope lookup starts finding values in the
<code>customerOrder</code>'s <code>order</code> object first:</p>
<pre><code class="language-html">{{#with order}}
  &lt;h3&gt;Thanks for your order {{name}}!&lt;/h3&gt;
  &lt;span&gt;{{customerType}}&lt;/span&gt;
{{#with order}}
</code></pre>
<p>In between <code>{{#with order}}</code> and <code>{{/with}}</code>, the scope's contexts look like:</p>
<pre><code>[
  customerOrder.order,
  customerOrder
]
</code></pre>
<p>The top of the scope is called the <strong>current context</strong>.  In this case it is <code>customerOrder.order</code>.</p>
<p>When <code>{{name}}</code> is looked up, it will first look for <code>name</code> on the <strong>current context</strong>.  As that value
exists, <code>Rudloph Steiner</code> will be returned.</p>
<p>When <code>{{customerType}}</code> is looked up, it will look for <code>customerType</code> on the <strong>current context</strong>.  As
that value does not exist, the next context, <code>customerOrder</code>, will be searched. The value of
<code>customerOrder.customerType</code> will be returned.</p>
<p>From within a given scope, you can reference the <strong>current context</strong> or control which context
should be used to find values.</p>
<p>See examples below:</p>
<pre><code class="language-html">{{#with order}}
   &lt;div&gt;My Current Context Object: {{.}}&lt;/div&gt; &lt;!-- references the order object--&gt;
   &lt;div&gt;My Parent Context Object: {{../.}}&lt;/div&gt;  &lt;!-- references the customerOrder object--&gt; 
   &lt;div&gt;An Item on my Parent Context's Object: {{../customerNumber}}&lt;/div&gt;
   &lt;div&gt;My Parent's Parent Context Object: {{../../.}}&lt;/div&gt; &lt;!-- example of how you might access the parent of a parent --&gt;
{{/with}}
</code></pre>
<p><a name="enumeration"></a></p>
<h2>Looping over arrays</h2>
<p>Enumerating allows you to loop through the contents of an iterable item. We’ve done this above for
the options in our select dropdown. The <code>{{#each key}} ... {{/each}}</code> tag set
is used to iterate over an enumerable collection, such as an array. In the
example above, we are looping over an array of objects. As with <a href="#context">sections</a>,
the properties of the objects we are iterating over are accessible
from data keys inside the <code>#each</code> scope without dot notation. In the example
above, we saw:</p>
<pre><code class="language-html">{{#each items}}
  &lt;li class=&quot;list-group-item&quot;&gt;
    &lt;label&gt;
      {{name}} &lt;span class=&quot;badge&quot;&gt;${{price}}&lt;/span&gt;
    &lt;/label&gt;
  &lt;/li&gt;
{{/each}}
</code></pre>
<p>Because the context of the <code>{{#each}}</code> block is <code>items</code>, we can reference
the <code>name</code> and <code>price</code> properties of <code>items</code> directly&mdash;i.e, we don't need to
write <code>{{items.name}}</code> or <code>{{items.price}}</code>, we can just write <code>{{name}}</code> or <code>{{price}}</code>.</p>
<p>Call expressions can also be passed
to <a href="../docs/can.stache.helpers.each.html">#each</a>. For example, a ViewModel might
have a method to get menu items for a particular menu like <code>&quot;dinner&quot;</code> or
<code>&quot;lunch&quot;</code> like:</p>
<pre><code>var OrderViewModel = can.Map.extend({
  itemsForMenuType: function(type){
    return this.attr(&quot;menu.items&quot;).filter(function(item){
      return item.attr(&quot;type&quot;) === type;
    })
  }
})
</code></pre>
<p>Call this method and return its result to <code>#each</code> like:</p>
<pre><code>{{#each itemsForMenuType(&quot;lunch&quot;)}}
  &lt;li&gt;...&lt;/li&gt;
{{/each}}
</code></pre>
<p>Note that <a href="../docs/can.stache.tags.section.html">#key</a> can also
be used to loop through objects with enumerable properties. In general,
<a href="../docs/can.stache.helpers.each.html">#each</a> should be used if the key references
<a href="../docs/can.List.html">can.List</a> or Arrays that have or often have incremental updates. <a href="../docs/can.stache.tags.section.html">#key</a>
should be used when the list is replaced by a list with items that look
nothing like the previous list's items.</p>
<p><a name="conditionallogic"></a></p>
<h2>Conditional Logic</h2>
<p>Stache templates have a limited capacity for conditional logic. Open up your
<code>main.stache</code> file. It should look like this:</p>
<pre><code>{{&gt; header.stache}}

{{#eq page &quot;home&quot;}}
  {{&gt; home.stache}}
{{/eq}}

{{#eq page &quot;restaurants&quot;}}
  {{#if slug}}
    {{#eq action 'order'}}
      &lt;pmo-order {(slug)}=&quot;slug&quot;&gt;&lt;/pmo-order&gt;
    {{/eq}}
    {{^if action}}
      &lt;pmo-restaurant-details {(slug)}=&quot;slug&quot;&gt;&lt;/pmo-restaurant-details&gt;
    {{/if}}
  {{else}}
    &lt;pmo-restaurant-list&gt;&lt;/pmo-restaurant-list&gt;
  {{/if}}
{{/eq}}

{{#eq page &quot;orders&quot;}}
  &lt;pmo-order-history&gt;&lt;/pmo-order-history&gt;
{{/eq}}
</code></pre>
<p>You’ll see two different helpers: <code>eq</code> and <code>if</code>. The <code>eq</code> helper takes two
arguments: the first being the key that is within the current section, and
the second a value to compare to the first argument to see if they are equal.
The <code>if</code> helper checks for one truthy argument before rendering what the
<code>if</code> block contains.</p>
<p>You might also notice the use of the <code>^</code> character, which will render the
section if the result of the helper is false. In other words, you can write
<code>{{^if action}}content{{/if}}</code> instead of <code>{{#if action}}{{else}}content{{/if}}</code></p>
<p>In general, it’s best to keep complex logic out of your templates. Their main function
should be to display data from the view model. If you need to use more complex logic
to display data in your templates, you can use a helper. Helpers are not covered in detail
in this guide; but you can get more information on them in the API: <a href="../docs/can.Component.prototype.helpers.html">Helpers</a></p>
<p><a name="partials"></a></p>
<h2>Partials</h2>
<p>You can nest templates in other templates by using partials. Partials inherit
the context from which they are called. They are evaluated at render time, so you
should be careful to avoid infinite loops. To include a partial, put its URL or
ID inside <code>{{&gt; }}</code>.</p>
<p>In our example above, you can see that <code>{{&gt; header.stache}}</code> includes the
<code>header.stache</code> file into the template.</p>
<hr />
<p><span class="pull-left"><a href="TheDefinePlugin.html">&lsaquo; The Define Plugin</a></span>
<span class="pull-right"><a href="AppStateAndRouting.html">App State and Routing &rsaquo;</a></span></p>
</div>

</section>

    		
    	

    </article>
  </div>
</div>

  <footer><p>CanJS is part of <a href="http://donejs.com">DoneJS</a>. Created and maintained by the open source team at <a href="http://bitovi.com">Bitovi</a>. <strong>Currently v3.0.0.</strong></p></footer>
	<script type="text/javascript">
		var docObject = {"content":"<div class=\"main-container\">\n  \n  \t<nav class=\"sidebar\">\n    \n        \n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-core.html\">\n\t\t\t\t\t\t\tCore\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-ecosystem.html\">\n\t\t\t\t\t\t\tEcosystem\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-infrastructure.html\">\n\t\t\t\t\t\t\tInfrastructure\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-legacy.html\">\n\t\t\t\t\t\t\tLegacy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"guides.html\">\n\t\t\t\t\t\t\tGuides\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Why.html\">\n\t\t\t\t\t\t\tWhy CanJS?\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Using.html\">\n\t\t\t\t\t\t\tSetting up CanJS\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Tutorial.html\">\n\t\t\t\t\t\t\tGetting Started Tutorial\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Setup.html\">\n\t\t\t\t\t\t\tSetup\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"ApplicationDesign.html\">\n\t\t\t\t\t\t\tApplication Design\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Constructors.html\">\n\t\t\t\t\t\t\tConstructors\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Observables.html\">\n\t\t\t\t\t\t\tObservables\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"TheDefinePlugin.html\">\n\t\t\t\t\t\t\tThe Define Plugin\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"current\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"StacheTemplates.html\">\n\t\t\t\t\t\t\tStache Templates\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"AppStateAndRouting.html\">\n\t\t\t\t\t\t\tApp State and Routing\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Components.html\">\n\t\t\t\t\t\t\tComponents\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"ViewModels.html\">\n\t\t\t\t\t\t\tView Models\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"DataModelsAndFixtures.html\">\n\t\t\t\t\t\t\tData Models and Fixtures\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Routing.html\">\n\t\t\t\t\t\t\tRouting\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"LoadingStates.html\">\n\t\t\t\t\t\t\tLoading States\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"EventHandling.html\">\n\t\t\t\t\t\t\tEvent Handling\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"WebServiceCommunication.html\">\n\t\t\t\t\t\t\tWeb Service Communication\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Recap.html\">\n\t\t\t\t\t\t\tRecap\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Recipes.html\">\n\t\t\t\t\t\t\tRecipes\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"migrating.html\">\n\t\t\t\t\t\t\tMigrating to 3.0\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"roadmap.html\">\n\t\t\t\t\t\t\tRoadmap\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n    \n</nav>\n  \n\n  <div class=\"content-container\">\n    <article>\n    \t\n    \t\t<section class=\"title\">\n\t<h1>Stache Templates</h1>\n</section>\n\n    \t\n\n        \n\n    \t\n    \t\t\n    \t\t\t<section class=\"description\">\n    \n</section>\n\n    \t\t\n    \t\n\n    \n    \n    \n    \n    \n\n\n    \t\n    \t\t\n    \t\t\t<section class=\"body\">\n    <div class=\"getting-started\">\n<hr />\n<p><strong>In this Chapter</strong></p>\n<ul>\n<li>Stache Templates</li>\n</ul>\n<p>Get the code for: <a href=\"/guides/examples/PlaceMyOrder/ch-2_canjs-getting-started.zip\">chapter: stache templates</a></p>\n<hr />\n<p>Now that we have a basic sketch of our application, and we've covered a few CanJS fundamentals,\nit’s time for us to start working with the sample application. We'll begin with the\napplication's templates.</p>\n<p>As mentioned in the <a href=\"./Tutorial.html\">introduction</a>, we’re using Stache templates in\nour app. Remember that when we downloaded our custom build of CanJS, we\nincluded the <a href=\"../docs/can.stache.html\">can.stache</a> plugin.</p>\n<p>We can create a simple template, render it to a document fragment and insert it into the page like\nthe following:</p>\n<pre><code>var template = can.stache(&quot;&lt;h1&gt;{{message}}&lt;/h1&gt;&quot;);\nvar frag = template({message: &quot;Hello World&quot;});\n$(&quot;body&quot;).append(frag);\n</code></pre>\n<p>Stache templates look similar to normal HTML, except they contain magic tags that contain\na very simple language that can be used to:</p>\n<ul>\n<li><a href=\"#context\">lookup and insert values into the html output</a></li>\n<li><a href=\"#enumeration\">loop over arrays and can.Lists</a></li>\n<li><a href=\"#conditionallogic\">control-flow behavior like if and switch</a></li>\n<li><a href=\"#partials\">render other templates with partials</a></li>\n<li>perform custom control-flow behavior</li>\n</ul>\n<p>Stache templates support both <a href=\"https://github.com/janl/mustache.js/\">Mustache</a>\nand <a href=\"http://handlebarsjs.com/\">Handlebar</a> syntax. For more\ninformation on the details of these formats, see their respective websites.</p>\n<p>It will be easiest for us to look at these with an example, so let’s work with\none. Open up your <code>components/order_details/order_details.stache</code> file.\nIt should look like this:</p>\n<pre><code class=\"language-html\">{{#with order}}\n  &lt;h3&gt;Thanks for your order {{name}}!&lt;/h3&gt;\n  &lt;div&gt;\n    &lt;label class=&quot;control-label&quot;&gt;Confirmation Number: {{_id}}&lt;/label&gt;\n  &lt;/div&gt;\n\n  &lt;h4&gt;Items ordered:&lt;/h4&gt;\n  &lt;ul class=&quot;list-group panel&quot;&gt;\n    {{#each items}}\n      &lt;li class=&quot;list-group-item&quot;&gt;\n        &lt;label&gt;\n          {{name}} &lt;span class=&quot;badge&quot;&gt;${{price}}&lt;/span&gt;\n        &lt;/label&gt;\n      &lt;/li&gt;\n    {{/each}}\n\n    &lt;li class=&quot;list-group-item&quot;&gt;\n      &lt;label&gt;Total &lt;span class=&quot;badge&quot;&gt;${{total}}&lt;/span&gt;&lt;/label&gt;\n    &lt;/li&gt;\n  &lt;/ul&gt;\n\n  &lt;div&gt;&lt;label class=&quot;control-label&quot;&gt;Phone: {{phone}}&lt;/label&gt;&lt;/div&gt;\n  &lt;div&gt;&lt;label class=&quot;control-label&quot;&gt;Address: {{address}}&lt;/label&gt;&lt;/div&gt;\n{{/with}}\n</code></pre>\n<p><a name=\"context\"></a></p>\n<h2>Value lookup</h2>\n<p>Assume for the moment that we have the following <code>customerOrder</code> map passed in to our Stache template:</p>\n<pre><code>{\n   customerNumber: 12543,\n   customerType: 'Business',\n   order: {\n      name: 'Rudloph Steiner',\n      _id: 837267,\n      items: [\n         {\n            name: 'Garden Gnome',\n            price: 23.70\n         }\n      ],\n      total: 23.70,\n      phone: '+49 170 345 6789',\n      address: 'Beuselstrasse 15, Berlin',\n      \n      total: function(){\n        var sum = 0;\n        this.items.forEach(function(item){\n          sum += item.price;\n        });\n        return sum;\n      }\n   }\n}\n</code></pre>\n<p>If we want to show the <code>customerType</code> in a <code>&lt;span&gt;</code> we can do that in a stache template like the following:</p>\n<pre><code>&lt;span&gt;{{customerType}}&lt;/span&gt;\n</code></pre>\n<p>What's inside the magic tags, in this case <code>customerType</code>, is a\n<a href=\"../docs/can.stache.expressions.html#section_KeyLookupexpressions\">key lookup expression</a>.\n<a href=\"../docs/can.stache.key.html\">Keys</a> are used to lookup values in the\n<a href=\"../docs/can.view.Scope.html\">template scope</a>.</p>\n<p>A DOT(<code>.</code>) operator\ncan be used to lookup nested values.  For example:</p>\n<pre><code>&lt;h3&gt;Thanks for your order {{order.name}}!&lt;/h3&gt;\n&lt;span&gt;{{customerType}}&lt;/span&gt;\n</code></pre>\n<p>Similar to variable lookup JavaScript, a stache key lookup can search for a value in multiple places.\nEach of these places is called a <strong>context</strong>.  The collection of all available contexts for a key lookup\nis called a <a href=\"../docs/can.view.Scope.html\">scope</a>.</p>\n<p>The root context is\nthe data passed to a template. In this case, the root context is the <code>customerOrder</code>\nobject at the begining of this section.  This is why <code>{{customerType}}</code> outputs <code>Business</code>.</p>\n<p><a href=\"../docs/can.stache.tags.section.html\">Sections</a>\ncreate contexts in Stache.  A section begins with <code>{{#EXPRESSION}}</code> or <code>{{^EXPRESSION}}</code>\nand ends with <code>{{/EXPRESSION}}</code>.  In the following example <code>{{#with order}}</code>\ndefines a section whose scope lookup starts finding values in the\n<code>customerOrder</code>'s <code>order</code> object first:</p>\n<pre><code class=\"language-html\">{{#with order}}\n  &lt;h3&gt;Thanks for your order {{name}}!&lt;/h3&gt;\n  &lt;span&gt;{{customerType}}&lt;/span&gt;\n{{#with order}}\n</code></pre>\n<p>In between <code>{{#with order}}</code> and <code>{{/with}}</code>, the scope's contexts look like:</p>\n<pre><code>[\n  customerOrder.order,\n  customerOrder\n]\n</code></pre>\n<p>The top of the scope is called the <strong>current context</strong>.  In this case it is <code>customerOrder.order</code>.</p>\n<p>When <code>{{name}}</code> is looked up, it will first look for <code>name</code> on the <strong>current context</strong>.  As that value\nexists, <code>Rudloph Steiner</code> will be returned.</p>\n<p>When <code>{{customerType}}</code> is looked up, it will look for <code>customerType</code> on the <strong>current context</strong>.  As\nthat value does not exist, the next context, <code>customerOrder</code>, will be searched. The value of\n<code>customerOrder.customerType</code> will be returned.</p>\n<p>From within a given scope, you can reference the <strong>current context</strong> or control which context\nshould be used to find values.</p>\n<p>See examples below:</p>\n<pre><code class=\"language-html\">{{#with order}}\n   &lt;div&gt;My Current Context Object: {{.}}&lt;/div&gt; &lt;!-- references the order object--&gt;\n   &lt;div&gt;My Parent Context Object: {{../.}}&lt;/div&gt;  &lt;!-- references the customerOrder object--&gt; \n   &lt;div&gt;An Item on my Parent Context's Object: {{../customerNumber}}&lt;/div&gt;\n   &lt;div&gt;My Parent's Parent Context Object: {{../../.}}&lt;/div&gt; &lt;!-- example of how you might access the parent of a parent --&gt;\n{{/with}}\n</code></pre>\n<p><a name=\"enumeration\"></a></p>\n<h2>Looping over arrays</h2>\n<p>Enumerating allows you to loop through the contents of an iterable item. We’ve done this above for\nthe options in our select dropdown. The <code>{{#each key}} ... {{/each}}</code> tag set\nis used to iterate over an enumerable collection, such as an array. In the\nexample above, we are looping over an array of objects. As with <a href=\"#context\">sections</a>,\nthe properties of the objects we are iterating over are accessible\nfrom data keys inside the <code>#each</code> scope without dot notation. In the example\nabove, we saw:</p>\n<pre><code class=\"language-html\">{{#each items}}\n  &lt;li class=&quot;list-group-item&quot;&gt;\n    &lt;label&gt;\n      {{name}} &lt;span class=&quot;badge&quot;&gt;${{price}}&lt;/span&gt;\n    &lt;/label&gt;\n  &lt;/li&gt;\n{{/each}}\n</code></pre>\n<p>Because the context of the <code>{{#each}}</code> block is <code>items</code>, we can reference\nthe <code>name</code> and <code>price</code> properties of <code>items</code> directly&mdash;i.e, we don't need to\nwrite <code>{{items.name}}</code> or <code>{{items.price}}</code>, we can just write <code>{{name}}</code> or <code>{{price}}</code>.</p>\n<p>Call expressions can also be passed\nto <a href=\"../docs/can.stache.helpers.each.html\">#each</a>. For example, a ViewModel might\nhave a method to get menu items for a particular menu like <code>&quot;dinner&quot;</code> or\n<code>&quot;lunch&quot;</code> like:</p>\n<pre><code>var OrderViewModel = can.Map.extend({\n  itemsForMenuType: function(type){\n    return this.attr(&quot;menu.items&quot;).filter(function(item){\n      return item.attr(&quot;type&quot;) === type;\n    })\n  }\n})\n</code></pre>\n<p>Call this method and return its result to <code>#each</code> like:</p>\n<pre><code>{{#each itemsForMenuType(&quot;lunch&quot;)}}\n  &lt;li&gt;...&lt;/li&gt;\n{{/each}}\n</code></pre>\n<p>Note that <a href=\"../docs/can.stache.tags.section.html\">#key</a> can also\nbe used to loop through objects with enumerable properties. In general,\n<a href=\"../docs/can.stache.helpers.each.html\">#each</a> should be used if the key references\n<a href=\"../docs/can.List.html\">can.List</a> or Arrays that have or often have incremental updates. <a href=\"../docs/can.stache.tags.section.html\">#key</a>\nshould be used when the list is replaced by a list with items that look\nnothing like the previous list's items.</p>\n<p><a name=\"conditionallogic\"></a></p>\n<h2>Conditional Logic</h2>\n<p>Stache templates have a limited capacity for conditional logic. Open up your\n<code>main.stache</code> file. It should look like this:</p>\n<pre><code>{{&gt; header.stache}}\n\n{{#eq page &quot;home&quot;}}\n  {{&gt; home.stache}}\n{{/eq}}\n\n{{#eq page &quot;restaurants&quot;}}\n  {{#if slug}}\n    {{#eq action 'order'}}\n      &lt;pmo-order {(slug)}=&quot;slug&quot;&gt;&lt;/pmo-order&gt;\n    {{/eq}}\n    {{^if action}}\n      &lt;pmo-restaurant-details {(slug)}=&quot;slug&quot;&gt;&lt;/pmo-restaurant-details&gt;\n    {{/if}}\n  {{else}}\n    &lt;pmo-restaurant-list&gt;&lt;/pmo-restaurant-list&gt;\n  {{/if}}\n{{/eq}}\n\n{{#eq page &quot;orders&quot;}}\n  &lt;pmo-order-history&gt;&lt;/pmo-order-history&gt;\n{{/eq}}\n</code></pre>\n<p>You’ll see two different helpers: <code>eq</code> and <code>if</code>. The <code>eq</code> helper takes two\narguments: the first being the key that is within the current section, and\nthe second a value to compare to the first argument to see if they are equal.\nThe <code>if</code> helper checks for one truthy argument before rendering what the\n<code>if</code> block contains.</p>\n<p>You might also notice the use of the <code>^</code> character, which will render the\nsection if the result of the helper is false. In other words, you can write\n<code>{{^if action}}content{{/if}}</code> instead of <code>{{#if action}}{{else}}content{{/if}}</code></p>\n<p>In general, it’s best to keep complex logic out of your templates. Their main function\nshould be to display data from the view model. If you need to use more complex logic\nto display data in your templates, you can use a helper. Helpers are not covered in detail\nin this guide; but you can get more information on them in the API: <a href=\"../docs/can.Component.prototype.helpers.html\">Helpers</a></p>\n<p><a name=\"partials\"></a></p>\n<h2>Partials</h2>\n<p>You can nest templates in other templates by using partials. Partials inherit\nthe context from which they are called. They are evaluated at render time, so you\nshould be careful to avoid infinite loops. To include a partial, put its URL or\nID inside <code>{{&gt; }}</code>.</p>\n<p>In our example above, you can see that <code>{{&gt; header.stache}}</code> includes the\n<code>header.stache</code> file into the template.</p>\n<hr />\n<p><span class=\"pull-left\"><a href=\"TheDefinePlugin.html\">&lsaquo; The Define Plugin</a></span>\n<span class=\"pull-right\"><a href=\"AppStateAndRouting.html\">App State and Routing &rsaquo;</a></span></p>\n</div>\n\n</section>\n\n    \t\t\n    \t\n\n    </article>\n  </div>\n</div>\n","src":{"path":"docs/can-guides/getting-started-tutorial/stache-templates.md"},"description":"\n","name":"StacheTemplates","title":"Stache Templates","type":"page","parent":"Tutorial","order":5,"disabletableofcontents":true,"comment":" "};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="./static/node_modules/steal/steal.production.js"></script>
	
</body>

</html>
