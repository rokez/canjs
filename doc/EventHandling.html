<!DOCTYPE html>
<!--####################################################################
	THIS IS A GENERATED FILE -- ANY CHANGES MADE WILL BE OVERWRITTEN

	INSTEAD CHANGE:
	source: [object Object]
	@page EventHandling
######################################################################## -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	
	<link rel="stylesheet" type="text/css" href="./static/bundles/bit-docs-site/static.css">
	
</head>

<body>
  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger">Menu</label>
  <header><nav class="navbar">
	<a class="brand" href="../index.html">CanJS</a>

	<ul class="bitovi-menu">
		<li class="dropdown">
			<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
			<ul class="dropdown-menu">
				<li><a href="http://bitovi.com">Bitovi.com</a></li>
				<li><a href="http://bitovi.com/blog/">Blog</a></li>
				<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
				<li><a href="http://bitovi.com/training/">Training</a></li>
				<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
			</ul>
		</li>
	</ul>

	<ul class="navbar-items">
		<li class="dropdown">
				<a href="http://github.com/canjs/canjs">Github</a>
				<ul class="dropdown-menu">
      		<li><a href="http://github.com/canjs/can-connect">can-connect</a></li>
					<li><a href=".">can-set</a></li>
					<li><a href=".">can-compute</a></li>
					<li><a href=".">can-component</a></li>
				</ul>
		</li>
		<li>
			<a href="https://gitter.im/canjs/canjs">Chat</a>
		</li>
		<li>
			<a href="http://forums.donejs.com/c/canjs">Forum</a>
		</li>
	</ul>

</nav>
</header>
  	<div class="main-container">
  
  	<nav class="sidebar">
    
        
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-core.html">
							Core
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-ecosystem.html">
							Ecosystem
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-infrastructure.html">
							Infrastructure
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="can-legacy.html">
							Legacy
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               parent
                               expanded">
						<a class="page"
							href="guides.html">
							Guides
						</a>
						
							
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Why.html">
							Why CanJS?
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Using.html">
							Setting up CanJS
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               parent
                               expanded">
						<a class="page"
							href="Tutorial.html">
							Getting Started Tutorial
						</a>
						
							
	<ul>
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Setup.html">
							Setup
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="ApplicationDesign.html">
							Application Design
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Constructors.html">
							Constructors
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Observables.html">
							Observables
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="TheDefinePlugin.html">
							The Define Plugin
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="StacheTemplates.html">
							Stache Templates
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="AppStateAndRouting.html">
							App State and Routing
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Components.html">
							Components
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="ViewModels.html">
							View Models
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="DataModelsAndFixtures.html">
							Data Models and Fixtures
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Routing.html">
							Routing
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="LoadingStates.html">
							Loading States
						</a>
						
					</li>
				

			
		
			
				
					<li class="current
                               parent
                               expanded">
						<a class="page"
							href="EventHandling.html">
							Event Handling
						</a>
						
							

						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="WebServiceCommunication.html">
							Web Service Communication
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Recap.html">
							Recap
						</a>
						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="Recipes.html">
							Recipes
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="migrating.html">
							Migrating to 3.0
						</a>
						
					</li>
				

			
		
			
				
					<li class="
                               
                               ">
						<a class="page"
							href="roadmap.html">
							Roadmap
						</a>
						
					</li>
				

			
		
	</ul>


						
					</li>
				

			
		
	</ul>


    
</nav>
  

  <div class="content-container">
    <article>
    	
    		<section class="title">
	<h1>Event Handling</h1>
</section>

    	

        

    	
    		
    			<section class="description">
    
</section>

    		
    	

    
    
    
    
    


    	
    		
    			<section class="body">
    <div class="getting-started">
<hr />
<p><strong>In this Chapter</strong></p>
<ul>
<li>Event Handling</li>
</ul>
<p>Get the code for: <a href="/guides/examples/PlaceMyOrder/ch-8_canjs-getting-started.zip">chapter: event handling</a></p>
<hr />
<p>CanJS makes it easy to handle any
<a href="https://developer.mozilla.org/en-US/docs/Web/Events">any standard DOM event</a>,
such as a <code>change</code> event, in your component. To add an event handler, we
have to make changes in two places:</p>
<ol>
<li>The view template</li>
<li>The <code>can.Component</code> view model</li>
</ol>
<p>Before we can work with an example, let’s get the restaurant details page
working. When you go to the Restaurants page in your browser, then select
a state and city, then click the “Place My Order” button next to a restaurant,
the page will have a <code>pmo-restaurant-details</code> element without any content.</p>
<p><img src="../can/guides/images/event-handling/EmptyRestaurantDetails.png" alt="Empty pmo-restaurant-details element" /></p>
<p>As we’ve discussed earlier, you need to include the component’s script
file to register the component with CanJS. While we’re at it, we’re going to
include the scripts for the rest of the components that we’re going to use.
Let’s edit the <code>index.html</code> file by replacing these lines:</p>
<pre><code class="language-html">    &lt;!-- Replace with order component script --&gt;
    &lt;!-- Replace with order details component script --&gt;
    &lt;!-- Replace with order history component script --&gt;
    &lt;!-- Replace with order list component script --&gt;
    &lt;!-- Replace with order phone component script --&gt;
</code></pre>
<p>with these lines:</p>
<pre><code class="language-html">    &lt;script src=&quot;components/order/order.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;components/order_details/order_details.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;components/order_list/order_list.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;components/order_history/order_history.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;components/order_phone/order_phone.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>We have just one more file we need to include before we move on. This
section is going to introduce orders from a restaurant, and
we’ll want to have an <code>Order</code> model. Find this line:</p>
<pre><code>    &lt;!-- Replace with order model script --&gt;
</code></pre>
<p>and replace it with this line:</p>
<pre><code>    &lt;script src=&quot;models/order.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>Now, if you refresh the page, you’ll see the details for Spago.</p>
<p><img src="../can/guides/images/application-design/RestaurantDetails.png" alt="Restaurant details page" /></p>
<p>If you click the “Order from Spago” button, you’ll find yourself with a menu, a
name field, and an address field; however, we’re missing one important piece of
customer information: a phone number. Let’s build a <code>phone-validator</code>
component to collect this information, and add some event handling to
validate the field as the user types.</p>
<p>There are two ways you can add event handling to an element:</p>
<ul>
<li>by adding an attribute with the event name prefixed by <code>can-</code>.</li>
<li>by adding an attribute with the event name surrounded in parenthesis, e.g., <code>(click)</code>.</li>
</ul>
<pre><code class="language-html">&lt;!--Example using can- syntax--&gt;
&lt;input name=&quot;phone&quot; type=&quot;text&quot; can-keyup=&quot;{setPhoneValue @element.val}&quot;&gt;
   
&lt;!--Example using () syntax--&gt;
&lt;input name=&quot;phone&quot; type=&quot;text&quot; ($keyup)=&quot;setPhoneValue(@element.val)&quot;&gt;
</code></pre>
<p>Of these, the preferred method is to use parenthesis to surround the event name.
Again, <a href="https://developer.mozilla.org/en-US/docs/Web/Events">any standard DOM event</a> is supported.
More information about <code>can.stache's</code> event and two-way binding syntaxes can be found at <a href="http://localhost:8080/docs/can.view.bindings.html">can.view.bindings</a>.</p>
<p>In addition to defining an event, you can pass certain predefined parameters
to the method that handles the event. These parameters include:</p>
<ul>
<li>@element - The can.$ wrapped element where the event occurred.</li>
<li>@event - The event object&mdash;or properties off of that object.</li>
<li>@viewModel - If the element is a can.Component, the component's viewModel.</li>
<li>@context - The current context.</li>
</ul>
<p>You are not limited to these parameters. Any valid value can be passed in to the
handler method. Separate method parameters with a space, e.g. <code>{{myMethod arg1 arg2}}</code></p>
<p>Let’s open the <code>components/order_phone/order_phone.stache</code> file and add the
following:</p>
<pre><code class="language-html">&lt;div class=&quot;form-group{{#if error}} has-error{{/if}}&quot;&gt;
  &lt;label&gt;Phone:&lt;/label&gt;
  &lt;input name=&quot;phone&quot; type=&quot;text&quot; ($keyup)=&quot;setPhoneValue(@element.val)&quot;&gt;
  {{#if error}}
    {{#eq order.phone '911'}}
      &lt;p&gt;That's not your real number :-(&lt;/p&gt;
    {{else}}
      &lt;p&gt;Please enter a phone number in the format 555-555-5555&lt;/p&gt;
    {{/eq}}
  {{/if}}
&lt;/div&gt;
</code></pre>
<p>Notice the <code>&lt;input /&gt;</code> element with a <code>($keyup)</code> event handler. Whenever there
is a <code>keyup</code> event in the <code>input</code>, the code in the value will be executed. We’re
also passing <code>@element.val</code> to the <code>setPhoneValue</code> helper. Let’s
add the component’s JavaScript to the <code>components/order_phone/order_phone.js</code>
file:</p>
<pre><code>var PhoneViewModel = can.Map.extend({
  error: function(){
    var phone = this.attr(&quot;order&quot;).attr(&quot;phone&quot;);
    return phone &amp;&amp; (!/^(\d|-)*$/.test(phone) || phone === &quot;911&quot;);
  },

  setPhoneValue: function(val){
    this.attr('order').attr('phone', val);
  }
});

can.Component.extend({
  tag: 'phone-validator',
  viewModel: PhoneViewModel,
  template: can.view('components/order_phone/order_phone.stache')
});
</code></pre>
<p>Here you can see the <code>setPhoneValue</code> helper function, which takes the <code>val</code>
passed to it by the template and sets the <code>phone</code> property of the
component’s <code>order</code> property to <code>val</code>.</p>
<p>But how do errors show up? The template is using the <code>error</code> property on the
component, which looks like this:</p>
<pre><code>  error: function(){
    var phone = this.attr(&quot;order&quot;).attr(&quot;phone&quot;);
    return phone &amp;&amp; (!/^(\d|-)*$/.test(phone) || phone === &quot;911&quot;);
  },
</code></pre>
<p>Notice that the <code>error</code> property uses <code>this.attr(&quot;order&quot;).attr(&quot;phone&quot;)</code> in
its getter. Because of CanJS’s <a href="Observables.html">observables</a>, CanJS is
aware of us setting that value in our <code>setPhoneValue</code> helper, and thus only
runs the getter again (called “recomputing the value”) when
the value has changed. When the <code>setPhoneValue</code> helper sets the value, CanJS
recomputes the <code>error</code> property’s value, which will return an error if you
type “911” or anything that doesn’t look like a phone number.</p>
<p><img src="../can/guides/images/event-handling/RestaurantOrderError911.png" alt="Restaurant order error when you type 911 as your phone number" /></p>
<p>Note that you can place as many event handlers as you need on an element. Adding event
handlers in this way directly binds the events to the element. This can impact
performance in situations where you have many elements to bind events to. For
more performant event binding, you can use the <code>can.Component</code>’s <a href="../docs/can.Component.prototype.events.html">events
property</a>. Discussing this is beyond
the scope of this introduction. See the API for more details.</p>
<hr />
<p><span class="pull-left"><a href="LoadingStates.html">&lsaquo; Loading States</a></span>
<span class="pull-right"><a href="WebServiceCommunication.html">Web Service Communication &rsaquo;</a></span></p>
</div>

</section>

    		
    	

    </article>
  </div>
</div>

  <footer><p>CanJS is part of <a href="http://donejs.com">DoneJS</a>. Created and maintained by the open source team at <a href="http://bitovi.com">Bitovi</a>. <strong>Currently v3.0.0.</strong></p></footer>
	<script type="text/javascript">
		var docObject = {"content":"<div class=\"main-container\">\n  \n  \t<nav class=\"sidebar\">\n    \n        \n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-core.html\">\n\t\t\t\t\t\t\tCore\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-ecosystem.html\">\n\t\t\t\t\t\t\tEcosystem\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-infrastructure.html\">\n\t\t\t\t\t\t\tInfrastructure\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"can-legacy.html\">\n\t\t\t\t\t\t\tLegacy\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"guides.html\">\n\t\t\t\t\t\t\tGuides\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Why.html\">\n\t\t\t\t\t\t\tWhy CanJS?\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Using.html\">\n\t\t\t\t\t\t\tSetting up CanJS\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Tutorial.html\">\n\t\t\t\t\t\t\tGetting Started Tutorial\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\t<ul>\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Setup.html\">\n\t\t\t\t\t\t\tSetup\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"ApplicationDesign.html\">\n\t\t\t\t\t\t\tApplication Design\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Constructors.html\">\n\t\t\t\t\t\t\tConstructors\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Observables.html\">\n\t\t\t\t\t\t\tObservables\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"TheDefinePlugin.html\">\n\t\t\t\t\t\t\tThe Define Plugin\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"StacheTemplates.html\">\n\t\t\t\t\t\t\tStache Templates\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"AppStateAndRouting.html\">\n\t\t\t\t\t\t\tApp State and Routing\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Components.html\">\n\t\t\t\t\t\t\tComponents\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"ViewModels.html\">\n\t\t\t\t\t\t\tView Models\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"DataModelsAndFixtures.html\">\n\t\t\t\t\t\t\tData Models and Fixtures\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Routing.html\">\n\t\t\t\t\t\t\tRouting\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"LoadingStates.html\">\n\t\t\t\t\t\t\tLoading States\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"current\n                               parent\n                               expanded\">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"EventHandling.html\">\n\t\t\t\t\t\t\tEvent Handling\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"WebServiceCommunication.html\">\n\t\t\t\t\t\t\tWeb Service Communication\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Recap.html\">\n\t\t\t\t\t\t\tRecap\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"Recipes.html\">\n\t\t\t\t\t\t\tRecipes\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"migrating.html\">\n\t\t\t\t\t\t\tMigrating to 3.0\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t\t\t\n\t\t\t\t\n\t\t\t\t\t<li class=\"\n                               \n                               \">\n\t\t\t\t\t\t<a class=\"page\"\n\t\t\t\t\t\t\thref=\"roadmap.html\">\n\t\t\t\t\t\t\tRoadmap\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n\t\t\t\t\n\n\t\t\t\n\t\t\n\t</ul>\n\n\n    \n</nav>\n  \n\n  <div class=\"content-container\">\n    <article>\n    \t\n    \t\t<section class=\"title\">\n\t<h1>Event Handling</h1>\n</section>\n\n    \t\n\n        \n\n    \t\n    \t\t\n    \t\t\t<section class=\"description\">\n    \n</section>\n\n    \t\t\n    \t\n\n    \n    \n    \n    \n    \n\n\n    \t\n    \t\t\n    \t\t\t<section class=\"body\">\n    <div class=\"getting-started\">\n<hr />\n<p><strong>In this Chapter</strong></p>\n<ul>\n<li>Event Handling</li>\n</ul>\n<p>Get the code for: <a href=\"/guides/examples/PlaceMyOrder/ch-8_canjs-getting-started.zip\">chapter: event handling</a></p>\n<hr />\n<p>CanJS makes it easy to handle any\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/Events\">any standard DOM event</a>,\nsuch as a <code>change</code> event, in your component. To add an event handler, we\nhave to make changes in two places:</p>\n<ol>\n<li>The view template</li>\n<li>The <code>can.Component</code> view model</li>\n</ol>\n<p>Before we can work with an example, let’s get the restaurant details page\nworking. When you go to the Restaurants page in your browser, then select\na state and city, then click the “Place My Order” button next to a restaurant,\nthe page will have a <code>pmo-restaurant-details</code> element without any content.</p>\n<p><img src=\"../can/guides/images/event-handling/EmptyRestaurantDetails.png\" alt=\"Empty pmo-restaurant-details element\" /></p>\n<p>As we’ve discussed earlier, you need to include the component’s script\nfile to register the component with CanJS. While we’re at it, we’re going to\ninclude the scripts for the rest of the components that we’re going to use.\nLet’s edit the <code>index.html</code> file by replacing these lines:</p>\n<pre><code class=\"language-html\">    &lt;!-- Replace with order component script --&gt;\n    &lt;!-- Replace with order details component script --&gt;\n    &lt;!-- Replace with order history component script --&gt;\n    &lt;!-- Replace with order list component script --&gt;\n    &lt;!-- Replace with order phone component script --&gt;\n</code></pre>\n<p>with these lines:</p>\n<pre><code class=\"language-html\">    &lt;script src=&quot;components/order/order.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;components/order_details/order_details.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;components/order_list/order_list.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;components/order_history/order_history.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;components/order_phone/order_phone.js&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>We have just one more file we need to include before we move on. This\nsection is going to introduce orders from a restaurant, and\nwe’ll want to have an <code>Order</code> model. Find this line:</p>\n<pre><code>    &lt;!-- Replace with order model script --&gt;\n</code></pre>\n<p>and replace it with this line:</p>\n<pre><code>    &lt;script src=&quot;models/order.js&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>Now, if you refresh the page, you’ll see the details for Spago.</p>\n<p><img src=\"../can/guides/images/application-design/RestaurantDetails.png\" alt=\"Restaurant details page\" /></p>\n<p>If you click the “Order from Spago” button, you’ll find yourself with a menu, a\nname field, and an address field; however, we’re missing one important piece of\ncustomer information: a phone number. Let’s build a <code>phone-validator</code>\ncomponent to collect this information, and add some event handling to\nvalidate the field as the user types.</p>\n<p>There are two ways you can add event handling to an element:</p>\n<ul>\n<li>by adding an attribute with the event name prefixed by <code>can-</code>.</li>\n<li>by adding an attribute with the event name surrounded in parenthesis, e.g., <code>(click)</code>.</li>\n</ul>\n<pre><code class=\"language-html\">&lt;!--Example using can- syntax--&gt;\n&lt;input name=&quot;phone&quot; type=&quot;text&quot; can-keyup=&quot;{setPhoneValue @element.val}&quot;&gt;\n   \n&lt;!--Example using () syntax--&gt;\n&lt;input name=&quot;phone&quot; type=&quot;text&quot; ($keyup)=&quot;setPhoneValue(@element.val)&quot;&gt;\n</code></pre>\n<p>Of these, the preferred method is to use parenthesis to surround the event name.\nAgain, <a href=\"https://developer.mozilla.org/en-US/docs/Web/Events\">any standard DOM event</a> is supported.\nMore information about <code>can.stache's</code> event and two-way binding syntaxes can be found at <a href=\"http://localhost:8080/docs/can.view.bindings.html\">can.view.bindings</a>.</p>\n<p>In addition to defining an event, you can pass certain predefined parameters\nto the method that handles the event. These parameters include:</p>\n<ul>\n<li>@element - The can.$ wrapped element where the event occurred.</li>\n<li>@event - The event object&mdash;or properties off of that object.</li>\n<li>@viewModel - If the element is a can.Component, the component's viewModel.</li>\n<li>@context - The current context.</li>\n</ul>\n<p>You are not limited to these parameters. Any valid value can be passed in to the\nhandler method. Separate method parameters with a space, e.g. <code>{{myMethod arg1 arg2}}</code></p>\n<p>Let’s open the <code>components/order_phone/order_phone.stache</code> file and add the\nfollowing:</p>\n<pre><code class=\"language-html\">&lt;div class=&quot;form-group{{#if error}} has-error{{/if}}&quot;&gt;\n  &lt;label&gt;Phone:&lt;/label&gt;\n  &lt;input name=&quot;phone&quot; type=&quot;text&quot; ($keyup)=&quot;setPhoneValue(@element.val)&quot;&gt;\n  {{#if error}}\n    {{#eq order.phone '911'}}\n      &lt;p&gt;That's not your real number :-(&lt;/p&gt;\n    {{else}}\n      &lt;p&gt;Please enter a phone number in the format 555-555-5555&lt;/p&gt;\n    {{/eq}}\n  {{/if}}\n&lt;/div&gt;\n</code></pre>\n<p>Notice the <code>&lt;input /&gt;</code> element with a <code>($keyup)</code> event handler. Whenever there\nis a <code>keyup</code> event in the <code>input</code>, the code in the value will be executed. We’re\nalso passing <code>@element.val</code> to the <code>setPhoneValue</code> helper. Let’s\nadd the component’s JavaScript to the <code>components/order_phone/order_phone.js</code>\nfile:</p>\n<pre><code>var PhoneViewModel = can.Map.extend({\n  error: function(){\n    var phone = this.attr(&quot;order&quot;).attr(&quot;phone&quot;);\n    return phone &amp;&amp; (!/^(\\d|-)*$/.test(phone) || phone === &quot;911&quot;);\n  },\n\n  setPhoneValue: function(val){\n    this.attr('order').attr('phone', val);\n  }\n});\n\ncan.Component.extend({\n  tag: 'phone-validator',\n  viewModel: PhoneViewModel,\n  template: can.view('components/order_phone/order_phone.stache')\n});\n</code></pre>\n<p>Here you can see the <code>setPhoneValue</code> helper function, which takes the <code>val</code>\npassed to it by the template and sets the <code>phone</code> property of the\ncomponent’s <code>order</code> property to <code>val</code>.</p>\n<p>But how do errors show up? The template is using the <code>error</code> property on the\ncomponent, which looks like this:</p>\n<pre><code>  error: function(){\n    var phone = this.attr(&quot;order&quot;).attr(&quot;phone&quot;);\n    return phone &amp;&amp; (!/^(\\d|-)*$/.test(phone) || phone === &quot;911&quot;);\n  },\n</code></pre>\n<p>Notice that the <code>error</code> property uses <code>this.attr(&quot;order&quot;).attr(&quot;phone&quot;)</code> in\nits getter. Because of CanJS’s <a href=\"Observables.html\">observables</a>, CanJS is\naware of us setting that value in our <code>setPhoneValue</code> helper, and thus only\nruns the getter again (called “recomputing the value”) when\nthe value has changed. When the <code>setPhoneValue</code> helper sets the value, CanJS\nrecomputes the <code>error</code> property’s value, which will return an error if you\ntype “911” or anything that doesn’t look like a phone number.</p>\n<p><img src=\"../can/guides/images/event-handling/RestaurantOrderError911.png\" alt=\"Restaurant order error when you type 911 as your phone number\" /></p>\n<p>Note that you can place as many event handlers as you need on an element. Adding event\nhandlers in this way directly binds the events to the element. This can impact\nperformance in situations where you have many elements to bind events to. For\nmore performant event binding, you can use the <code>can.Component</code>’s <a href=\"../docs/can.Component.prototype.events.html\">events\nproperty</a>. Discussing this is beyond\nthe scope of this introduction. See the API for more details.</p>\n<hr />\n<p><span class=\"pull-left\"><a href=\"LoadingStates.html\">&lsaquo; Loading States</a></span>\n<span class=\"pull-right\"><a href=\"WebServiceCommunication.html\">Web Service Communication &rsaquo;</a></span></p>\n</div>\n\n</section>\n\n    \t\t\n    \t\n\n    </article>\n  </div>\n</div>\n","src":{"path":"docs/can-guides/getting-started-tutorial/event-handling.md"},"description":"\n","name":"EventHandling","title":"Event Handling","type":"page","parent":"Tutorial","order":11,"disabletableofcontents":true,"comment":" "};
	</script>

	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/bit-docs-site/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript'
				data-main="bit-docs-site/static"
				src="./static/node_modules/steal/steal.production.js"></script>
	
</body>

</html>
